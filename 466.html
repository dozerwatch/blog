<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Blog</title>
    <link rel="stylesheet" href="css/466.css">
    <link rel="stylesheet" href="css/template.css">

</head>
<body>

    <!-- Header -->
    <div class="header">
        <a href="index.html">Home</a>
        <a href="365.html">365</a>
        <a href="466.html">466</a>
        <a href="old.html">Old</a>
    </div>

    <!-- Container for all class notes -->
    <div class="notes-container">

        <!-- Two note entries -->
        <div class="notes-entry">
            <div class="first-container">
                <h3 class="notes-title entry">Return Oriented Programming - CSE466 - Robert - 09.19.24</h3>
                <p class="entry"></p>
            </div>
            <div class="second-container">
                <h3 class="notes-title entry">Return Oriented Programming - CSE466 - Robert - 09.17.24</h3>
                <p class="entry">Give two GDB fixes for printf and breakpoints.</p>
                <p class="entry">Review how to ret2win.</p>
                <p class="entry">ROP is a type of memory corruption on the stack.</p>
                <p class="entry">The difference between ASLR and PIE: Former is a system configuration that tries to randomize everything possible. Latter is a compilation option that randomizes the ELF file.</p>
                <p class="entry">If PIE is disabled and ASLR is enabled, then the stack and other things might be randomized but the binary is not.</p>
                <p class="entry">Libraries HAVE to be PIE.</p>
                <p class="entry">PLT: Procedure Linkage Table - maps called functions to its library code.</p>
                <p class="entry">gdb.debug runs the process and attaches a gdb session to it.</p>
                <p class="entry">To disable ASLR, set ASLR=False and setuid=False.</p>
                <p class="entry">Give an introduction to ROP.</p>
            </div>
        </div>

        <!-- Two note entries -->
        <div class="notes-entry">
            <div class="first-container">
                <h3 class="notes-title entry">Reverse Engineering - CSE466 - Robert - 09.12.24</h3>
                <p class="entry">Show how to get yancode bytes in IDA and GDB in 19.0.</p>
                <p class="entry">Use diff to show difference between output of different inputs in 20.0.</p>
                <p class="entry">Give tips on solving 20.0 and 22.0.</p>
                <p class="entry">Explain how srand() works.</p>
            </div>
            <div class="second-container">
                <h3 class="notes-title entry">Reverse Engineering - CSE466 - Robert - 09.10.24</h3>
                <p class="entry">Meme review.</p>
                <p class="entry">Demo IDA reverse engineering on 17.1.</p>
                <p class="entry">Demo gdb scripting on 17.1.</p>
                <p class="entry">Talk about Bitsync project.</p>
                <p class="entry">gdb scripting interrupt_cmp.</p>
            </div>
        </div>

        <!-- Two note entries -->
        <div class="notes-entry">
            <div class="first-container">
                <h3 class="notes-title entry">Reverse Engineering - CSE466 - Robert - 09.05.24</h3>
                <p class="entry">Assembler: convert code to bytes.</p>
                <p class="entry">Disassembler: convert bytes to code.</p>
                <p class="entry">IDA: best decompilation readability, runs on cloud.</p>
                <p class="entry">Ghidra: used by NSA, open source, extensible, runs locally.</p>
                <p class="entry">Demonstrate how to pass bytes to the challenges.</p>
                <p class="entry">Write a Yan85 assembler.</p>
                <p class="entry">Explain how cmp and jmp instructions work.</p>
                <p class="entry">Teach how to debug stripped and ASLR binaries: remove suid and set $BASE.</p>
            </div>
            <div class="second-container">
                <h3 class="notes-title entry">Reverse Engineering - CSE466 - Robert - 09.03.24</h3>
                <p class="entry">Meme review: gdb, success... how?, "pole vaulter", canary, ASLR, it's pwnver, grades.</p>
                <p class="entry">tiny8086: it doesn't take that much C code to make an emulator.</p>
                <p class="entry">shellcode level 14: 6 bytes 2-stage shellcode explanation.</p>
                <p class="entry">Go over how to find canary using gdb.</p>
                <p class="entry">Later babymem level tips.</p>
                <p class="entry">An emulator is a program that pretends it's a CPU.</p>
                <p class="entry">Yan85 static analysis and IDA tips.</p>
            </div>
        </div>
        
        <!-- Two note entries -->
        <div class="notes-entry">
            <div class="first-container">
                <h3 class="notes-title entry">Program Security - CSE466 - Robert OH - 08.30.24</h3>
                <p class="entry">Comprehensively go over how to write shellcode using pwntools with level 12: unique bytes.</p>
                <p class="entry">Give different ways to zero out a 64-bit register.</p>
                <p class="entry">Use the stack to put a long string into a register.</p>
                <p class="entry">Describe what a 2-stage shellcode is.</p>
                <p class="entry">Show a trick to get RIP into the stack.</p>
                <p class="entry">Comprehensively go over a control flow memory error (buffer overwrite) using gdb.</p>
            </div>
            <div class="second-container">
                <h3 class="notes-title entry">Program Security - CSE466 - Robert - 08.29.24</h3>
                <p class="entry">Meme review - people struggling with challenges, quasi-helpful meme, free cat /flag bug... boo Adical.</p>
                <p class="entry">The cat /flag bug (lasted 3 hours) was caused by a new commit which chown 1000:1000 all files in /home/hacker that were not owned by hacker already. A user can sudo ln -s the flag to an arbitrary file in /home/hacker in practice mode. This creates a symbolic link to /flag in /home/hacker that is owned by root. Then everytime the user starts the challenge, the symbolic link gets chown 1000:1000 and that flows to the /flag file. So the /flag file will be owned by the hacker!</p>
                <p class="entry">The fix is to chown -R 1000:1000 /home/hacker. This recursively chown 1000:1000 all files and directories and does not traverse any symbolic links by default. On the other hand, chown affects the referent of the symbolic link, rather than the symlink itself by default.</p>
                <p class="entry">Global imports are good when hacking, but bad when programming.</p>
                <p class="entry">By default, pwntools assumes a 32-bit architecture.</p>
                <p class="entry">Use pwntool disasm() to look at shellcode bytes.</p>
                <p class="entry">Look at felix cloutier documentation.</p>
                <p class="entry">Use gdb.debug_assembly() to test shellcode.</p>
                <p class="entry">Use process() & interactive() to test shellcode.</p>
                <p class="entry">Draw inspiration from pwntools shellcraft.</p>
                <p class="entry">Explain symbolic links. Use symlinks for shellcode.</p>
                <p class="entry">f strings, gdb.debug with int3, .gdbinit</p>
            </div>
        </div>

        <!-- Two note entries -->
        <div class="notes-entry">
            <div class="first-container">
                <h3 class="notes-title entry">Program Security - Shellcoding Tips</h3>
                <p class="entry">Build shellcode using as, ld, and objcopy.</p>
                <p class="entry">View shellcode with od, hexdump.</p>
                <p class="entry">Build shellcode using gcc and objcopy.</p>
                <p class="entry">Build shellcode using python pwntools.</p>
                <p class="entry">Write assembly in pwntools and view it with disasm().</p>
                <p class="entry">Shellcraft</p>
                <p class="entry">Write shellcode bytes into a file.</p>
                <p class="entry">Use strace to debug.</p>
                <p class="entry">Use gdb.debug_assembly() to debug assembly instructions. It launches a gdb sessions that starts the beginning of shellcode.</p>
                <p class="entry">Always use p.interactive() for a process() until you understand why.</p>
                <p class="entry">Use gdb.debug() to view shellcode. Can use int3 to break at shellcode. A cheat code! </p>
            </div>
            <div class="second-container">
                <h3 class="notes-title entry">Program Security - Memory Corruption Tips</h3>
                <p class="entry">A vulnerable program is given that does a buffer overread using the read() function. There is an important variable that determines which if-else condition is trigger. There is also a win() function.</p>
                <p class="entry">Simplest way to memory corrupt is to input a shit load of data.</p>
                <p class="entry">We can also use static analysis, tools like IDA, hexdump, gdb, to find the offset for the important variable. We will need address of start of input and address of important variable. The offset is the difference.</p>
                <p class="entry">Another strategy is dynamic analysis with gdb. We can then poke around the program as it is running using effective breakpoints. At these breakpoints, we can examine registers and memory and much more.</p>
                <p class="entry">gdb scripting. pwntools always breaks at _start.</p>
                <p class="entry">Cyclic value: a string where any 4-byte substring unique identifies the index. We can use this to find the padding size for the return address. Redirect control flow to win() function.</p>
                <p class="entry">Describe a couple of complicated memory corruption techniques.</p>
            </div>
        </div>

    </div>
</body>
</html>